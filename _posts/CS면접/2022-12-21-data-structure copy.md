---
title:  "[CS면접] 데이터베이스"
search: true
categories: 
  - cs-interview
last_modified_at: 2022-12-23
toc: true
toc_sticky: true
toc_label: "[CS면접] 데이터베이스"
---

## 데이터베이스

### 데이터베이스의 특징
- 실시간 접근성(Real-Time Accessibility) : 비정형적인 질의(조회)에 대하여 실시간 처리에 의한 응답이 가능해야 하며,
- 지속적인 변화(Continuous Evloution) : 데이터베이스의 상태는 동적입니다. 즉 새로운 데이터의 삽입(Insert), 삭제(Delete), 갱신(Update)으로 항상 최신의 데이터를 유지해야 합니다.
- 동시 공용(Concurrent Sharing) : 데이터베이스는 서로 다른 목적을 가진 여러 응용자들을 위한 것이므로 다수의 사용자가 동시에 같은 내용의 데이터를 이용할 수 있어야 합니다.
- 내용에 의한 참조(Content Reference) : 데이터베이스에 있는 데이터를 참조할 때 데이터 레코드의 주소나 위치에 의해서가 아니라 사용자가 요구하는 데이터 내용으로 찾습니다.

### 데이터베이스 언어(DDL, DML, DCL)
- DDL (정의어 : Data Definition Language) : 데이터베이스 구조를 정의, 수정, 삭제하는 언어 ( alter, create, drop )
- DML (조작어 : Data Manipulation Language) : 데이터베이스내의 자료 검색, 삽입, 갱신, 삭제를 위한 언어 ( select, insert, update, delete )
- DCL (제어어 : Data Control Language) : 데이터에 대해 무결성 유지, 병행 수행 제어, 보호와 관리를 위한 언어 ( commit, rollback, grant, revoke )

### 트리거란 무엇인가
- 트리거는 특정 테이블에 대한 이벤트에 반응해 INSERT, DELETE, UPDATE 같은 DML 문이 수행되었을 때, 데이터베이스에서 자동으로 동작하도록 작성된 프로그램입니다. 
- 사용자가 직접 호출하는 것이 아닌, 데이터베이스에서 자동적으로 호출한다는 것이 가장 큰 특징입니다.

### DBMS란 무엇인가?
데이터베이스는 여러 사람이 공유하고 사용할 목적으로 관리되는 정보입니다. 자료 중복을 없애고 구조화하여 처리를 효율적으로 하기 위해서 관련성을 가지며 기억시켜 놓은 데이터의 집합입니다. 이러한 데이터베이스를 조작하는 소프트웨어를 DBMS라고 합니다. 데이터베이스를 관리하며 응용프로그램들이 데이터베이스를 공유하며 사용할 수 있는 환경을 제공합니다. 데이터베이스를 구축하는 틀을 제공하는 검색 및 저장하는 기능을 제공합니다. 또 응용프로그램들이 데이터베이스에 접근할 수 있는 인터페이스를 제공하고 복구기능과 보안성 기능을 제공합니다.

### 스키마가 무엇이고 사용하는 이유는 무엇인가?
스키마는 데이터베이스의 구조와 제약 조건에 관한 전반적인 명세를 기술한 메타데이터의 집합이다. DB의 구조(개체, 관계)와 제약조건을 명세해야 한다. 이를 명시하는 이유는 데이터베이스의 일관성 있게 만들기 위한 필요 조건이다.
스키마는 데이터베이스를 구성하는 데이터 개체(Entity), 속성(Attribute), 관계(Relationship) 및 데이터 조작 시 데이터 값들이 갖는 제약 조건 등에 관해 전반적으로 정의한다.
스키마는 사용자의 관점에 따라 외부 스키마, 개념 스키마, 내부 스키마로 나뉘어지며, 이렇게 나누는 이유는 데이터베이스의 독립성을 위해서이다.
![image](https://user-images.githubusercontent.com/75301269/209248526-e4f4b2ce-406d-4897-a895-ce2631020f34.png)

- 외부 스키마(External Schema) : 개개 사용자 관점에서 정의한 데이터베이스 스키마이다. 전체 데이터베이스의 한 논리적인 부분이며 Sub Schema라고도 한다. 이는 개개 사용자나 응용프로그래머가 접근하는 데이터베이스다.
- 개념 스키마(Conceptual Schema) : 범 기관적인 관점에서 정의한 데이터베이스 스키마이다. 모든 응용에 대한 전체적인 통합된 데이터 구조이다.
- 내부 스키마(Internal Schema) : 물리적 저장 장치 관점에서 정의한 데이터베이스 스키마이다. 개념 스키마에 대한 저장 구조를 정의한다.

### 정규화가 무엇인가?
- 제1정규형: 모든 속성 값이 원자 값을 갖도록 분해한다.
- 제2정규형: 제1정규형을 만족하고, 기본키가 아닌 속성이 기본키에 완전 함수 종속이도록 분해한다.(여기서 완전 함수 종속이란 기본키의 부분집합이 다른 값을 결정하지 않는 것을 의미한다.)
- 제3정규형: 제2정규형을 만족하고, 기본키가 아닌 속성이 기본키에 직접 종속(비이행적 종속)하도록 분해한다.(여기서 이행적 종속이란 A->B->C가 성립하는 것으로, 이를 A,B와 B,C로 분해하는 것이 제3정규형이다.)
- BCNF 정규형: 제3정규형을 만족하고, 함수 종속성 X->Y가 성립할 때 모든 결정자 X가 후보키가 되도록 분해한다.

### 트랜잭션이 무엇인가?
트랜잭션이란 데이터베이스 작업의 단위로써 하나 이상의 쿼리를 처리할 때 동일한 Connection 객체를 공유하여 에러가 발생한 경우 모든 과정을 되돌리기 위한 방법입니다.

### 트랜잭션의 ACID
- 원자성(Atomicity): 트랜잭션에 포함된 작업은 전부 수행되거나 전부 수행되지 않아야 한다.
- 일관성(Consistency): 트랜잭션을 수행하기 전이나 후나 데이터베이스는 항상 일관된 상태를 유지해야 한다.
- 고립성(Isolation): 수행 중인 트랜잭션에 다른 트랜잭션이 끼어들어 변경중인 데이터 값을 훼손하지 않아야한다.
- 지속성(Durability): 수행을 성공적으로 완료한 트랜잭션은 변경한 데이터를 영구히 저장해야 한다.

### 인데스란?
인덱스란 추가적인 쓰기 작업과 저장 공간을 활용하여 데이터베이스 테이블의 검색 속도를 향상시키기 위한 자료구조이다. 만약 우리가 책에서 원하는 내용을 찾는다고 하면, 책의 모든 페이지를 찾아 보는것은 오랜 시간이 걸린다. 그렇기 때문에 책의 저자들은 책의 맨 앞 또는 맨 뒤에 색인을 추가하는데, 데이터베이스의 index는 책의 색인과 같다.
데이터베이스에서도 테이블의 모든 데이터를 검색하면 시간이 오래 걸리기 때문에 데이터와 데이터의 위치를 포함한 자료구조를 생성하여 빠르게 조회할 수 있도록 돕고 있다.
만약 Index를 적용하지 않은 컬럼을 조회한다면, 전체를 탐색하는 Full Scan이 수행된다. Full Scan은 전체를 비교하여 탐색하기 때문에 처리 속도가 떨어진다.

### 인덱스의 자료구조
- B+Tree 인덱스 자료구조
	
   - 자식 노드가 2개 이상인 B-Tree를 개선시킨 자료구조이며,
   - BTree 리프노드들을 LinkedList로 연결하여 순차 검색을 용이하게 합니다. 해시 테이블보다 나쁜 O(log2N)의 시간복잡도를 갖지만 일반적으로 사용되는 자료구조입니다.
- 해시 테이블
	
   - 컬럼의 값으로 생성된 해시를 기반으로 인덱스를 구현합니다.
   - 시간복잡도가 O(1)이라 검색이 매우 빠릅니다.
   - 부등호(<,>)와 같은 연속적인 데이터를 위한 순차 검색이 불가능하기 때문에 사용에 적합하지 않습니다.

### DB 락의 종류
DB 락은 여러 개의 트랜잭션들이 하나의 데이터로 동시에 접근하려고 할 때 이를 제어해주는 도구이다.
- 공유락(LS, Shared Lock): 트랜잭션이 읽기를 할 때 사용하는 락, 데이터를 읽을 수 있지만 쓸 수 없음
- 베타락(LX, Exclusive Lock): 트랜잭션이 읽고 쓰기를 할 때 사용하는 락, 데이터를 읽고 쓸 수 있음

### 이상 현상의 종류와 설명
- 삭제 이상: 튜플 삭제 시 같이 저장된 다른 정보까지 연쇄적으로 삭제되는 현상
- 삽입 이상: 튜플 삽입 시 특정 속성에 해당하는 값이 없어 NULL을 입력해야 하는 현상
- 수정 이상: 튜플 수정 시 중복된 데이터의 일부만 수정되어 일어나는 데이터 불일치 현상

### RDBMS와 NoSQL 차이
- RDBMS
	
   - 2차원의 행과 열로 데이터의 관계를 관리하는 데이터베이스 
   - 장점: 스키마에 맞추어 데이터를 관리하기 때문에 데이터의 정합성을 보장할 수 있다.
   - 단점: 시스템이 커질 수록 쿼리가 복잡해지고 성능이 저하되며, 수평적 확장이 어렵다.
- NoSQL
	
   - RDBMS가 비대해짐에 따라 관계가 복잡해져, 이를 극복하기 위해 등장하게 된 데이터베이스
   - 장점: NOSQL은 스키마 없이 Key-Value 형태로 데이터를 관리하여 좀 더 자유롭게 데이터를 관리할 수 있다.
   - 단점: 중복된 데이터가 추가 가능하여, 이에 대한 관리가 필요하다.

### 데이터베이스 튜닝과 방법
DB 튜닝이란 DB의 구조나, DB 자체, 운영체제 등을 조정하여 DB 시스템의 전체적인 성능을 개선하는 작업을 말합니다. 
튜닝은 DB 설계 튜닝 → DBMS 튜닝 → SQL 튜닝 단계로 진행할 수 있습니다.
- 1단계 - DB 설계 튜닝(모델링 관점)
	
   - DB 설계 단계에서 성능을 고려하여 설계
   - 데이터 모델링, 인덱스 설계
   - 데이터파일, 테이블 스페이스 설계
   - 데이터베이스 용량 산정
   - 튜닝 사례 - 반정규화, 분산파일배치
- 2단계 - DBMS 튜닝(환경 관점)
	
   - 성능을 고려하여 메모리나 블록 크기 지정
   - CPU, 메모리 I/O에 관한 관점
   - 튜닝 사례 - Buffer 크기, Cache 크기
- 3단계 - SQL 튜닝(App 관점)
	
   - SQL 작성 시 성능 고려
   - Join, Indexing, SQL Execution Plan
   - 튜닝 사례 - Hash / Join

### 로킹은 무엇이란
- 상호배제와 접근제어 기능
- Lock을 걸어 그 Lock을 건 트랜잭션만이 Lock을 해제 할 수 있다.
- 하나의 Transaction이 사용하는 DB내의 data를 다른 Transaction이 접근하지 못하게 Lock을 설정하여 다른 Transaction이 접근하지 못하도록 한다. 실행 완료 후엔 Lock을 해제한다.